function replaceAll(find, replace, str){while( str.indexOf(find) > -1){str = str.replace(find, replace);}; return str;}; function menu_vw(b,t){var idname=b, b=$(b), ih=$('html'); if(b.length>0){b.bind('click',function(){var m=$(t), stt=m.attr('data-open-menu'); if(m.length>0){if(stt==undefined){m.attr('data-open-menu',0);}; var stt=parseInt(m.attr('data-open-menu')); if(stt==0){m.attr('data-open-menu',1); ih.scrollTop(0); ih.css('overflow-y','hidden');}else{m.attr('data-open-menu',0);  ih.css('overflow-y','auto');};};});}else{console.log('count element for identifier '+idname+' :0');};}
$(function(){/*scroll*/ var tb=$("[data-slide-active]"), cs=parseInt(tb.attr('data-slide-count')), bl=tb.find('.visible_slide span'), ww=window.outerWidth, wm=800, ih=$('html'); window.slidepause=0; if(ww<wm+1 && tb.length>0){function sp(){window.slidepause=1; setTimeout(function(){window.slidepause=0;},7000);}; tb.swipe({swipe:function(event, direction, distance, duration, fingerCount, fingerData) {if(direction=='up' || direction=='down'){if(direction=='up'){ih.scrollTop(ih.scrollTop()+distance);}else{ih.scrollTop(ih.scrollTop()-distance);};}; if(cs>1){var ca=parseInt(tb.attr('data-slide-active')), to_a=false; if(direction=='left'){if(ca+1>cs){var to_a=1;}else{var to_a=ca+1;};};if(direction=='right'){if(ca-1<1){var to_a=cs;}else{var to_a=ca-1;};}; if(to_a!==false){tb.attr('data-slide-active',to_a); sp();};}; }}); tb.swipe({fingers:1}); setInterval(function(){if(window.slidepause==0){var ca=parseInt(tb.attr('data-slide-active')), to_a=false; if(ca+1>cs){var to_a=1;}else{var to_a=ca+1;}; tb.attr('data-slide-active',to_a);};},5000); if(bl.length>0){bl.bind('click',function(){tb.attr('data-slide-active',$(this).index()+1);  sp();});};};  menu_vw('.mobile_menu_button','.head_nav'); menu_vw('.mobile_menu_button','#docs_menu'); });
$(function(){/*search*/ var min=$('#search_input_mini'),fin=$('#search_input_full'),ohm=$('#search_result_mini'),ohf=$('#search_result_full'),tpl={'list':'<li><a href="{{HREF}}">{{TITLE}}</a></li>','block':'<div class="post"><div class="post_img" style="background-image:url({{COVER}});"></div><div class="post_prewinfo"><span class="category_name">{{CATEGORY}}</span><a class="title" href="{{HREF}}">{{TITLE}}</a><span class="author_time">By <a href="'+window.location.origin+'/search?s={{AUTHOR_SEARCH}}">{{AUTHOR}}</a> on {{DATE}}</span><span class="description">{{DESCRIPTION}}</span><a class="read_full" href="{{HREF}}">Continue reading </a></div></div>'}; function get_stxt(){var s=window.location.href.split('?s='); if(s.length==2){if(s[1].length>0){return decodeURIComponent(decodeURI(replaceAll('+',' ',s[1])));}else{return false;};}else{return false;};}; function get_base(){var bn='jsonbase_posts', tt=new Date()*1; if(window.localStorage[bn+'_t_call']==undefined){window.localStorage[bn+'_t_call']=tt;}; var to=window.localStorage[bn+'_t_call']; if(window.localStorage[bn]==undefined || to+600000<tt){var cax=$.ajax({url:window.location.origin+"/base_search.json"}); cax.done(function(d) {window.localStorage[bn]=JSON.stringify(d); return lsw(); window.localStorage[bn+'_t_call']=tt;}); cax.fail(function(){return false;}); }else{return lsw();}; function lsw(){if(window.localStorage[bn]!==undefined){return JSON.parse(window.localStorage[bn]);}else{return false;};};}; function scan_base(s){var b=get_base(), s=s.toLowerCase().split(' '), rb=new Array(); if(b!==false && b.length>0){for(var sr=0; sr<s.length; sr++){var ws=s[sr]; if(ws.length>0){for(var i=0; i<b.length; i++){var sa=b[i]; if(sa.title.toLowerCase().split(ws).length>1 || sa.date.toLowerCase().split(ws).length>1 || sa.tags.toLowerCase().split(ws).length>1 || sa.category.toLowerCase().split(ws).length>1 || sa.description.toLowerCase().split(ws).length>1 || sa.author.toLowerCase().split(ws).length>1){if(rb.indexOf(i)<0){rb.push(i);};};};};}; if(rb.length>0){return rb;}else{return false;};}else{return false;};}; function totpl(v,d){var result=false; console.log(d); if(v!==undefined && d!==undefined){if(v=='f'){var result=tpl['block'].replace('{{HREF}}',d.href).replace('{{TITLE}}',d.title).replace('{{COVER}}',d.cover).replace('{{DESCRIPTION}}',d.description).replace('{{AUTHOR_SEARCH}}',d.author.replace(' ','+').toLocaleLowerCase()).replace('{{AUTHOR}}',d.author).replace('{{DATE}}',d.date).replace('{{CATEGORY}}',d.category).replace('{{HREF}}',d.href);}; if(v=='m'){var result=tpl['list'].replace('{{HREF}}',d.href).replace('{{TITLE}}',d.title);};}; return result;}; function worker(v,s){var r=scan_base(s), bp=false; if(v=='m'){var bp=ohm;}; if(v=='f'){var bp=ohf;}; if(r!==false){var b=get_base(), ci=new Array(); for(var i=0; i<r.length; i++){ci.push(totpl(v,b[r[i]])); if(v=='m' && bp.css('display')=='none'){bp.css('display','block');}; }; if(bp!==false && ci.length>0){bp.html(''); bp.prepend(ci.join('')); };}else{if(bp!==false){if(v=='f'){bp.html('<div class="no_results">No result</div>');}; if(v=='m' && bp.css('display')!=='none'){bp.css('display','none'); bp.html('');};};};}; if(min.length>0 && ohm.length>0){min.on('input',function(){worker('m',$(this).val());});}; if(fin.length>0 && ohf.length>0){fin.on('input',function(){worker('f',$(this).val());});}; if(get_stxt()!==false && fin.length>0 && ohf.length>0){fin.val(get_stxt()); worker('f',get_stxt());};});